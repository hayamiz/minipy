#!/usr/bin/ruby

native_funcs = [[:is_int, 1],
                [:is_float, 1],
                [:is_string, 1],
                [:is_dict, 1],
                [:is_list, 1],
                [:is_tuple, 1],
                [:is_ifun, 1],
                [:is_nfun, 1],
                [:add_int, 2],
                [:sub_int, 2],
                [:mul_int, 2],
                [:div_int, 2],
                [:mod_int, 2],
                [:invert_int, 1],
                [:and_int, 2],
                [:or_int, 2],
                [:xor_int, 2],
                [:lshift_int, 2],
                [:rshift_int, 2],
                [:prefix_sub, 1],

                [:add_float, 2],
                [:sub_float, 2],
                [:mul_float, 2],
                [:div_float, 2],

                [:len_string, 1],
                [:getitem_string, 2],
                [:add_string, 2],
                [:mul_string, 2],

                [:len_tuple, 1],
                [:getitem_tuple, 2],
                [:add_tuple, 2],
		[:hasitem_tuple, 2],
                [:len_list, 1],
                [:getitem_list, 2],
                [:setitem_list, 3],
                [:delitem_list, 2],
                [:pop_list, 1],
		[:hasitem_list, 2],
                [:len_dict, 1],
                [:has_key, 2],
                [:getitem_dict, 2],
                [:setitem_dict, 3],
                [:delitem_dict, 2],
                [:keys, 1],
                [:values, 1],
                [:items, 1],

                [:repr_int, 1],
                [:repr_float, 1],
                [:repr_ifun, 1],
                [:repr_nfun, 1],
                [:print_, 1],
                [:dprint, 1],
                [:print_string, 1],

		[:add, 2],
		[:prefix_add, 1],
		[:sub, 2],
		[:mul, 2],
		[:div, 2],
		[:mod, 2],
		[:invert, 1],
		[:lshift, 2],
		[:rshift, 2],
		[:and_, 2],
		[:or_, 2],
		[:xor_, 2],
                [:contains, 2],
                [:not_contains, 2],
		[:ntv_is, 2],
		[:ntv_is_not, 2],
		[:eq, 2],
		[:cmp, 2],
                [:not_, 1],
		[:ne, 2],
		[:gt, 2],
		[:lt, 2],
		[:ge, 2],
		[:le, 2],
		[:eq_pointer, 2],
                [:getitem, 2],
                [:setitem, 3],
                [:delitem, 2],

                [:itof, 1],
		[:str, 1],
		[:replace_string, 2],
		[:len, 1],
                [:append, 2],
                [:add_list, 2],
                [:range, -1],
                [:pop, -1],

                [:ntv_random, -1],
                [:sys_sleep, 1],

                # experimental
                [:thread_start, 2],
                [:thread_join, 1],
               ]

puts "/* !! DO NOT EDIT THIS FILE !! */"
puts "/* this file was generated by etc/gen_bootstrap.rb @ #{Time.now.to_s} */"
native_funcs.each do |func|
  puts "genv.set_sym(Symbol::get(\"#{func[0]}\"), Py_val::mk_nfun(Symbol::get(\"#{func[0]}\"), #{func[1]}, native::#{func[0]}));"
end
